
; ==============================================================================
; ------------------------------------------------------------------------------
; Mega PCM 2.0 - DAC Sound Driver
;
; (c) 2012-2024, Vladikcomper
;
; See https://github.com/vladikcomper/MegaPCM/tree/2.x
; ------------------------------------------------------------------------------

; ==============================================================================
; ------------------------------------------------------------------------------
; Constants
; ------------------------------------------------------------------------------


; ------------------------------------------------------------------------------
; Definitions for sample table
; ------------------------------------------------------------------------------

FLAGS_SFX:		equ	$01		; sample is SFX, normal drums cannot interrupt it
FLAGS_LOOP:		equ	$02		; loop sample indefinitely

TYPE_NONE:		equ	$00
TYPE_PCM:		equ	'P'
TYPE_PCM_TURBO:	equ	'T'
TYPE_DPCM:		equ	'D'

; ------------------------------------------------------------------------------
; Maximum playback rates:
TYPE_PCM_TURBO_MAX_RATE:	equ	32000 ; Hz
TYPE_PCM_MAX_RATE:			equ	25100 ; Hz
TYPE_DPCM_MAX_RATE:			equ	20600 ; Hz

; Internal driver's base rates for pitched playback.
; NOTICE: Actual max rates are slightly lower,
; because the highest pitch is 255/256, not 256/256.
TYPE_PCM_BASE_RATE:			equ	25208 ; Hz
TYPE_DPCM_BASE_RATE:		equ	20691 ; Hz


; ------------------------------------------------------------------------------
; Return error codes for `MegaPCM_LoadSampleTable`
; ------------------------------------------------------------------------------

MPCM_ST_TOO_MANY_SAMPLES:			equ	$01
MPCM_ST_UNKNOWN_SAMPLE_TYPE:		equ	$02

MPCM_ST_PITCH_NOT_SET:				equ	$10

MPCM_ST_WAVE_INVALID_HEADER:		equ	$20
MPCM_ST_WAVE_BAD_AUDIO_FORMAT:		equ	$21
MPCM_ST_WAVE_NOT_MONO:				equ	$22
MPCM_ST_WAVE_NOT_8BIT:				equ	$23
MPCM_ST_WAVE_BAD_SAMPLE_RATE:		equ	$24
MPCM_ST_WAVE_MISSING_DATA_CHUNK:	equ	$25

; ------------------------------------------------------------------------------
; Z80 equates
; ------------------------------------------------------------------------------

Z_MPCM_DriverReady:	equ $1fc3
Z_MPCM_CommandInput:	equ $1fc2
Z_MPCM_VolumeInput:	equ $1fc4
Z_MPCM_SFXVolumeInput:	equ $1fc5
Z_MPCM_PanInput:	equ $1fc6
Z_MPCM_SFXPanInput:	equ $1fc7
Z_MPCM_ActiveSamplePitch:	equ $1fdc
Z_MPCM_VBlankActive:	equ $1fe2
Z_MPCM_CalibrationApplied:	equ $1fe3
Z_MPCM_CalibrationScore_ROM:	equ $1fe4
Z_MPCM_CalibrationScore_RAM:	equ $1fe6
Z_MPCM_LastErrorCode:	equ $1fe8
Z_MPCM_SampleTable:	equ $1976
Z_MPCM_COMMAND_STOP:	equ $1
Z_MPCM_COMMAND_PAUSE:	equ $2
Z_MPCM_ERROR__BAD_INTERRUPT:	equ $2
Z_MPCM_ERROR__BAD_SAMPLE_TYPE:	equ $1
Z_MPCM_ERROR__UNKNOWN_COMMAND:	equ $80

; ==============================================================================
; ------------------------------------------------------------------------------
; Macros
; ------------------------------------------------------------------------------

; ------------------------------------------------------------------------------
; Macro to generate sample record in a sample table
; ------------------------------------------------------------------------------

dcSample: macro	SAMPLETYPE, SAMPLEPTR, SAMPLERATE, SAMPLEFLAGS
	dc.b	SAMPLETYPE					; $00	- type

	if SAMPLETYPE=TYPE_PCM
		if (SAMPLERATE+0)>TYPE_PCM_MAX_RATE
			fatal "Invalid sample rate: \sampleRate\. TYPE_PCM only supports sample rates <= \#TYPE_PCM_MAX_RATE Hz"
		endif
		dc.b	SAMPLEFLAGS+0							; $01	- flags (optional)
		dc.b	(SAMPLERATE+0)*256/TYPE_PCM_BASE_RATE	; $02	- pitch (optional for .WAV files)
		dc.b	0										; $03	- <RESERVED>
		dc.l	SAMPLEPTR								; $04	- start offset
		dc.l	SAMPLEPTR_End							; $08	- end offset

	elseif SAMPLETYPE=TYPE_PCM_TURBO
		if ((SAMPLERATE+0)<>TYPE_PCM_TURBO_MAX_RATE)&((SAMPLERATE+0)<>0)
			fatal "Invalid sample rate: SAMPLERATE. TYPE_PCM_TURBO only supports sample rate of \#TYPE_PCM_TURBO_MAX_RATE Hz"
		endif
		dc.b	SAMPLEFLAGS+0							; $01	- flags (optional)
		dc.b	$FF										; $02	- pitch (optional for .WAV files)
		dc.b	0										; $03	- <RESERVED>
		dc.l	SAMPLEPTR								; $04	- start offset
		dc.l	SAMPLEPTR_End							; $08	- end offset

	elseif SAMPLETYPE=TYPE_DPCM
		if SAMPLERATE>TYPE_DPCM_BASE_RATE
			fatal "Invalid sample rate: SAMPLERATE. TYPE_DPCM only supports sample rates <= \#TYPE_DPCM_BASE_RATE Hz"
		endif
		dc.b	SAMPLEFLAGS+0							; $01	- flags (optional)
		dc.b	(SAMPLERATE)*256/TYPE_DPCM_BASE_RATE	; $02	- pitch
		dc.b	0										; $03	- <RESERVED>
		dc.l	SAMPLEPTR								; $04	- start offset
		dc.l	SAMPLEPTR_End							; $08	- end offset

	elseif SAMPLETYPE=TYPE_NONE
		dc.b	0, 0, 0
		dc.l	0, 0

	else
		fatal "Unknown sample type. Please use one of: TYPE_PCM, TYPE_DPCM, TYPE_PCM_TURBO, TYPE_NONE"
	endif
	endm

; ------------------------------------------------------------------------------
; Macro to include a sample file
; ------------------------------------------------------------------------------

incdac:	macro NAME, PATH
		even
	NAME:	label *
		binclude	PATH
	NAME_End:	label *
	endm

; ------------------------------------------------------------------------------
; Macro to stop Z80 and take over its bus
; ------------------------------------------------------------------------------

MPCM_stopZ80:	macro
	move.w	#$100, ($A11100).l
	bset	#0, ($A11100).l
	bne.s	*-8
	endm

; ------------------------------------------------------------------------------
; Macro to start Z80 and release its bus
; ------------------------------------------------------------------------------

MPCM_startZ80:	macro
	move.w	#0, ($A11100).l
	endm

; ==============================================================================
; ------------------------------------------------------------------------------
; Mega PCM library blob
; ------------------------------------------------------------------------------

MegaPCMLibraryBlob:

	dc.l	$2F0B47F9, $00A11100, $303C0100, $36803740, $010041FA, $031043F9, $00A00000, $323C1975
	dc.l	$12D851C9, $FFFC7200, $37410100, $41F900A0, $1FC34E71, $4E713740, $01003681, $601636BC
	dc.l	$01000813, $000066FA, $121036BC, $00000C01, $0052670A, $303C0FFF, $51C8FFFE, $60E0265F
	dc.l	$4E7548E7, $3C3847F9, $00A11100, $43F900A0, $1976594F, $747E1A18, $67000148, $6B000134
	dc.l	$18181618, $52482458, $28580C05, $00446700, $00D60C05, $00506708, $0C050054, $66000150
	dc.l	$0C925249, $46466600, $00B60CAA, $57415645, $00086600, $013E45EA, $000C0C92, $666D7420
	dc.l	$66000130, $0C6A0100, $00086600, $012A0C6A, $0100000A, $66000124, $0C6A0800, $00166600
	dc.l	$011E4A03, $66301EAA, $000D1F6A, $000C0001, $30170C05, $0054660C, $0C407D00, $66000104
	dc.l	$76FF6012, $0C40620C, $620000F8, $48C0E188, $80FC6278, $1600B5CC, $640000EC, $1EAA0007
	dc.l	$1F6A0006, $00011F6A, $00050002, $1F6A0004, $00032017, $45F20808, $0C926461, $746166D6
	dc.l	$1EAA0007, $1F6A0006, $00011F6A, $00050002, $1F6A0004, $00032017, $49F20808, $504A300C
	dc.l	$02400001, $98C04A03, $670000A0, $200AD080, $5240E258, $3E804840, $220CD281, $5241E259
	dc.l	$3F410002, $484136BC, $01000813, $000066FA, $12C512C4, $12C312C0, $12C112EF, $000112D7
	dc.l	$12EF0003, $12EF0002, $36BC0000, $51CAFEC8, $60385348, $700041E8, $FFF4584F, $4CDF1C3C
	dc.l	$4E7536BC, $01000813, $000066FA, $12C512C5, $12C512C5, $12C512C5, $12C512C5, $12C536BC
	dc.l	$000041E8, $000B51CA, $FE8E7001, $60C87002, $60C47020, $60C07021, $60BC7022, $60B87023
	dc.l	$60B47024, $60B07025, $60AC7010, $60A833FC, $010000A1, $11000839, $000000A1, $110066F6
	dc.l	$13C000A0, $1FC233FC, $000000A1, $11004E75, $33FC0100, $00A11100, $08390000, $00A11100
	dc.l	$66F613FC, $000200A0, $1FC233FC, $000000A1, $11004E75, $33FC0100, $00A11100, $08390000
	dc.l	$00A11100, $66F613FC, $000000A0, $1FC233FC, $000000A1, $11004E75, $33FC0100, $00A11100
	dc.l	$08390000, $00A11100, $66F613FC, $000100A0, $1FC233FC, $000000A1, $11004E75, $33FC0100
	dc.l	$00A11100, $08390000, $00A11100, $66F613C0, $00A01FC4, $33FC0000, $00A11100, $4E7533FC
	dc.l	$010000A1, $11000839, $000000A1, $110066F6, $13C000A0, $1FC533FC, $000000A1, $11004E75
	dc.l	$33FC0100, $00A11100, $08390000, $00A11100, $66F613C0, $00A01FC6, $33FC0000, $00A11100
	dc.l	$4E7533FC, $010000A1, $11000839, $000000A1, $110066F6, $13C000A0, $1FC733FC, $000000A1
	dc.l	$11004E75, $F3ED56C3, $D1180000, $FEFFC210, $00C90000, $320900E5, $21006077, $0F770F77
	dc.l	$0F770F77, $0F770F77, $0F7775E1, $C94D6567, $6150434D, $20762E32, $2E300000, $C33B00F5
	dc.l	$3E0232E8, $1FF1C9F3, $3E1032DD, $1F214301, $223900ED, $73DE1FDD, $F933F1C1, $E1D131DD
	dc.l	$1FF508CB, $FCCB85E5, $7AE67F57, $CB83B320, $03051680, $D578B920, $0BDA6919, $CBBCEBED
	dc.l	$52C38700, $AF955F9C, $8557EBE5, $C521C41F, $0830012C, $E5ED7BDE, $1FDD21D1, $1F3AD31F
	dc.l	$CFF32AD9, $1FED4BD5, $1F110003, $D908AF08, $ED4BD11F, $0AE60FC6, $04473ADC, $1FFD6F21
	dc.l	$00031101, $40D9FB00, $3E00F3ED, $A0EDA016, $03E2EE00, $D94E0A12, $08FD8530, $012C087D
	dc.l	$D9FB9392, $D2C600F5, $3E000000, $0000F1F3, $18E2FB3A, $0900DDBE, $032025F3, $7BD9BD28
	dc.l	$154E0A12, $08FD8530, $012C08D9, $FBC50303, $030303C1, $18E5D9FB, $DDCB0A4E, $C29900C9
	dc.l	$3A09003C, $21008044, $DDBE0320, $04ED4BD7, $1FD7C3C6, $0021E100, $36C42336, $00C9D900
	dc.l	$030B030B, $001814F5, $C5068E7B, $D9BD28EE, $4E0A1208, $FD853001, $2C08D93E, $FF32E21F
	dc.l	$E52329E1, $10E57BD9, $BD280A4E, $0A1208FD, $8530012C, $08D9D9ED, $4BD11F0A, $E60FC604
	dc.l	$47D9007B, $D9BD280A, $4E0A1208, $FD853001, $2C08D93A, $DC1FFD6F, $3AC21FB7, $280EF2BF
	dc.l	$01DDCB0A, $46CAF118, $AF32C21F, $32E21F7B, $D9BD280A, $4E0A1208, $FD853001, $2C08D9C1
	dc.l	$F1FBC93D, $CA69193D, $2005FD2E, $0018DD3E, $8032E81F, $18D2F33E, $1832DD1F, $21A00222
	dc.l	$3900ED73, $DE1FDDF9, $33F1C1E1, $D131DD1F, $F5CBFCCB, $85E57AE6, $7F57CB83, $B3200305
	dc.l	$1680D578, $B9200BDA, $6919CBBC, $EBED52C3, $1502AF95, $5F9C8557, $EBE5C5ED, $7BDE1FDD
	dc.l	$21D11F3A, $D31FCFF3, $1100032A, $D91FED4B, $D51FD921, $00031101, $40D93E00, $F3EDA0ED
	dc.l	$A01603E2, $5602D97E, $122C7DD9, $FB9392D2, $3802E523, $2309E1F3, $18ECFB3A, $0900DDBE
	dc.l	$03201DF3, $7BD9BD28, $0D7E122C, $D9FBE5C5, $09C1E1C3, $5F02D9FB, $DDCB0A4E, $C21F02C9
	dc.l	$3A09003C, $21008044, $DDBE0320, $04ED4BD7, $1FD7C338, $02214C02, $36362336, $02C9D93E
	dc.l	$00C3AD02, $F5C506BF, $7BD9BD28, $F17E122C, $D93EFF32, $E21F3E00, $C5010000, $C110E900
	dc.l	$7BD9BD28, $037E122C, $D93AC21F, $B7280EF2, $E002DDCB, $0A46CAF1, $18AF32C2, $1F32E21F
	dc.l	$C1F1FBC9, $3DCA6919, $3D2006CD, $5C18AF18, $EC3E8032, $E81F18E1, $00000000, $00000000
	dc.l	$00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000
	dc.l	$00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000
	dc.l	$00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000
	dc.l	$00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000
	dc.l	$00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000
	dc.l	$00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000
	dc.l	$00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000
	dc.l	$00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000, $00000000
	dc.l	$00000000, $00010203, $04050607, $08090A0B, $0C0D0E0F, $10111213, $14151617, $18191A1B
	dc.l	$1C1D1E1F, $20212223, $24252627, $28292A2B, $2C2D2E2F, $30313233, $34353637, $38393A3B
	dc.l	$3C3D3E3F, $40414243, $44454647, $48494A4B, $4C4D4E4F, $50515253, $54555657, $58595A5B
	dc.l	$5C5D5E5F, $60616263, $64656667, $68696A6B, $6C6D6E6F, $70717273, $74757677, $78797A7B
	dc.l	$7C7D7E7F, $80818283, $84858687, $88898A8B, $8C8D8E8F, $90919293, $94959697, $98999A9B
	dc.l	$9C9D9E9F, $A0A1A2A3, $A4A5A6A7, $A8A9AAAB, $ACADAEAF, $B0B1B2B3, $B4B5B6B7, $B8B9BABB
	dc.l	$BCBDBEBF, $C0C1C2C3, $C4C5C6C7, $C8C9CACB, $CCCDCECF, $D0D1D2D3, $D4D5D6D7, $D8D9DADB
	dc.l	$DCDDDEDF, $E0E1E2E3, $E4E5E6E7, $E8E9EAEB, $ECEDEEEF, $F0F1F2F3, $F4F5F6F7, $F8F9FAFB
	dc.l	$FCFDFEFF, $08090A0B, $0C0D0E0F, $10101112, $13141516, $1718191A, $1B1C1D1E, $1E1F2021
	dc.l	$22232425, $26272829, $2A2B2C2C, $2D2E2F30, $31323334, $35363738, $393A3A3B, $3C3D3E3F
	dc.l	$40414243, $44454647, $4848494A, $4B4C4D4E, $4F505152, $53545556, $56575859, $5A5B5C5D
	dc.l	$5E5F6061, $62636464, $65666768, $696A6B6C, $6D6E6F70, $71727273, $74757677, $78797A7B
	dc.l	$7C7D7E7F, $80808182, $83848586, $8788898A, $8B8C8D8E, $8E8F9091, $92939495, $96979899
	dc.l	$9A9B9C9C, $9D9E9FA0, $A1A2A3A4, $A5A6A7A8, $A9AAAAAB, $ACADAEAF, $B0B1B2B3, $B4B5B6B7
	dc.l	$B8B8B9BA, $BBBCBDBE, $BFC0C1C2, $C3C4C5C6, $C6C7C8C9, $CACBCCCD, $CECFD0D1, $D2D3D4D4
	dc.l	$D5D6D7D8, $D9DADBDC, $DDDEDFE0, $E1E2E2E3, $E4E5E6E7, $E8E9EAEB, $ECEDEEEF, $F0F0F1F2
	dc.l	$F3F4F5F6, $11111213, $14151617, $1818191A, $1B1C1D1E, $1E1F2021, $22232425, $25262728
	dc.l	$292A2B2B, $2C2D2E2F, $30313232, $33343536, $37383839, $3A3B3C3D, $3E3F3F40, $41424344
	dc.l	$45454647, $48494A4B, $4C4C4D4E, $4F505152, $52535455, $56575859, $595A5B5C, $5D5E5F5F
	dc.l	$60616263, $64656666, $6768696A, $6B6C6C6D, $6E6F7071, $72737374, $75767778, $79797A7B
	dc.l	$7C7D7E7F, $80808182, $83848586, $86878889, $8A8B8C8D, $8D8E8F90, $91929393, $94959697
	dc.l	$98999A9A, $9B9C9D9E, $9FA0A0A1, $A2A3A4A5, $A6A7A7A8, $A9AAABAC, $ADADAEAF, $B0B1B2B3
	dc.l	$B4B4B5B6, $B7B8B9BA, $BABBBCBD, $BEBFC0C1, $C1C2C3C4, $C5C6C7C7, $C8C9CACB, $CCCDCECE
	dc.l	$CFD0D1D2, $D3D4D4D5, $D6D7D8D9, $DADBDBDC, $DDDEDFE0, $E1E1E2E3, $E4E5E6E7, $E8E8E9EA
	dc.l	$EBECEDEE, $191A1B1C, $1C1D1E1F, $20202122, $23242425, $26272828, $292A2B2C, $2C2D2E2F
	dc.l	$30303132, $33343435, $36373838, $393A3B3C, $3C3D3E3F, $40404142, $43444445, $46474848
	dc.l	$494A4B4C, $4C4D4E4F, $50505152, $53545455, $56575858, $595A5B5C, $5C5D5E5F, $60606162
	dc.l	$63646465, $66676868, $696A6B6C, $6C6D6E6F, $70707172, $73747475, $76777878, $797A7B7C
	dc.l	$7C7D7E7F, $80808182, $83848485, $86878888, $898A8B8C, $8C8D8E8F, $90909192, $93949495
	dc.l	$96979898, $999A9B9C, $9C9D9E9F, $A0A0A1A2, $A3A4A4A5, $A6A7A8A8, $A9AAABAC, $ACADAEAF
	dc.l	$B0B0B1B2, $B3B4B4B5, $B6B7B8B8, $B9BABBBC, $BCBDBEBF, $C0C0C1C2, $C3C4C4C5, $C6C7C8C8
	dc.l	$C9CACBCC, $CCCDCECF, $D0D0D1D2, $D3D4D4D5, $D6D7D8D8, $D9DADBDC, $DCDDDEDF, $E0E0E1E2
	dc.l	$E3E4E4E5, $22222324, $25252627, $2828292A, $2A2B2C2D, $2D2E2F30, $30313233, $33343535
	dc.l	$36373838, $393A3B3B, $3C3D3E3E, $3F404041, $42434344, $45464647, $4849494A, $4B4B4C4D
	dc.l	$4E4E4F50, $51515253, $54545556, $56575859, $595A5B5C, $5C5D5E5F, $5F606161, $62636464
	dc.l	$65666767, $68696A6A, $6B6C6C6D, $6E6F6F70, $71727273, $74757576, $77777879, $7A7A7B7C
	dc.l	$7D7D7E7F, $80808182, $82838485, $85868788, $88898A8B, $8B8C8D8D, $8E8F9090, $91929393
	dc.l	$94959696, $97989899, $9A9B9B9C, $9D9E9E9F, $A0A1A1A2, $A3A3A4A5, $A6A6A7A8, $A9A9AAAB
	dc.l	$ACACADAE, $AEAFB0B1, $B1B2B3B4, $B4B5B6B7, $B7B8B9B9, $BABBBCBC, $BDBEBFBF, $C0C1C2C2
	dc.l	$C3C4C4C5, $C6C7C7C8, $C9CACACB, $CCCDCDCE, $CFCFD0D1, $D2D2D3D4, $D5D5D6D7, $D8D8D9DA
	dc.l	$DADBDCDD, $2A2B2C2C, $2D2E2E2F, $30303132, $32333434, $35363637, $3838393A, $3A3B3C3C
	dc.l	$3D3E3E3F, $40404142, $42434444, $45464647, $4848494A, $4A4B4C4C, $4D4E4E4F, $50505152
	dc.l	$52535454, $55565657, $5858595A, $5A5B5C5C, $5D5E5E5F, $60606162, $62636464, $65666667
	dc.l	$6868696A, $6A6B6C6C, $6D6E6E6F, $70707172, $72737474, $75767677, $7878797A, $7A7B7C7C
	dc.l	$7D7E7E7F, $80808182, $82838484, $85868687, $8888898A, $8A8B8C8C, $8D8E8E8F, $90909192
	dc.l	$92939494, $95969697, $9898999A, $9A9B9C9C, $9D9E9E9F, $A0A0A1A2, $A2A3A4A4, $A5A6A6A7
	dc.l	$A8A8A9AA, $AAABACAC, $ADAEAEAF, $B0B0B1B2, $B2B3B4B4, $B5B6B6B7, $B8B8B9BA, $BABBBCBC
	dc.l	$BDBEBEBF, $C0C0C1C2, $C2C3C4C4, $C5C6C6C7, $C8C8C9CA, $CACBCCCC, $CDCECECF, $D0D0D1D2
	dc.l	$D2D3D4D4, $33333435, $35363637, $38383939, $3A3B3B3C, $3C3D3E3E, $3F3F4041, $41424243
	dc.l	$44444545, $46474748, $48494A4A, $4B4B4C4D, $4D4E4E4F, $50505151, $52535354, $54555656
	dc.l	$57575859, $595A5A5B, $5C5C5D5D, $5E5F5F60, $60616262, $63636465, $65666667, $68686969
	dc.l	$6A6B6B6C, $6C6D6E6E, $6F6F7071, $71727273, $74747575, $76777778, $78797A7A, $7B7B7C7D
	dc.l	$7D7E7E7F, $80808181, $82838384, $84858686, $87878889, $898A8A8B, $8C8C8D8D, $8E8F8F90
	dc.l	$90919292, $93939495, $95969697, $98989999, $9A9B9B9C, $9C9D9E9E, $9F9FA0A1, $A1A2A2A3
	dc.l	$A4A4A5A5, $A6A7A7A8, $A8A9AAAA, $ABABACAD, $ADAEAEAF, $B0B0B1B1, $B2B3B3B4, $B4B5B6B6
	dc.l	$B7B7B8B9, $B9BABABB, $BCBCBDBD, $BEBFBFC0, $C0C1C2C2, $C3C3C4C5, $C5C6C6C7, $C8C8C9C9
	dc.l	$CACBCBCC, $3B3C3C3D, $3D3E3E3F, $40404141, $42424343, $44444545, $46464748, $4849494A
	dc.l	$4A4B4B4C, $4C4D4D4E, $4E4F5050, $51515252, $53535454, $55555656, $57585859, $595A5A5B
	dc.l	$5B5C5C5D, $5D5E5E5F, $60606161, $62626363, $64646565, $66666768, $6869696A, $6A6B6B6C
	dc.l	$6C6D6D6E, $6E6F7070, $71717272, $73737474, $75757676, $77787879, $797A7A7B, $7B7C7C7D
	dc.l	$7D7E7E7F, $80808181, $82828383, $84848585, $86868788, $8889898A, $8A8B8B8C, $8C8D8D8E
	dc.l	$8E8F9090, $91919292, $93939494, $95959696, $97989899, $999A9A9B, $9B9C9C9D, $9D9E9E9F
	dc.l	$A0A0A1A1, $A2A2A3A3, $A4A4A5A5, $A6A6A7A8, $A8A9A9AA, $AAABABAC, $ACADADAE, $AEAFB0B0
	dc.l	$B1B1B2B2, $B3B3B4B4, $B5B5B6B6, $B7B8B8B9, $B9BABABB, $BBBCBCBD, $BDBEBEBF, $C0C0C1C1
	dc.l	$C2C2C3C3, $44444545, $46464747, $48484849, $494A4A4B, $4B4C4C4D, $4D4E4E4F, $4F4F5050
	dc.l	$51515252, $53535454, $55555656, $56575758, $5859595A, $5A5B5B5C, $5C5D5D5D, $5E5E5F5F
	dc.l	$60606161, $62626363, $64646465, $65666667, $67686869, $696A6A6B, $6B6B6C6C, $6D6D6E6E
	dc.l	$6F6F7070, $71717272, $72737374, $74757576, $76777778, $78797979, $7A7A7B7B, $7C7C7D7D
	dc.l	$7E7E7F7F, $80808081, $81828283, $83848485, $85868687, $87878888, $89898A8A, $8B8B8C8C
	dc.l	$8D8D8E8E, $8E8F8F90, $90919192, $92939394, $94959595, $96969797, $98989999, $9A9A9B9B
	dc.l	$9C9C9C9D, $9D9E9E9F, $9FA0A0A1, $A1A2A2A3, $A3A3A4A4, $A5A5A6A6, $A7A7A8A8, $A9A9AAAA
	dc.l	$AAABABAC, $ACADADAE, $AEAFAFB0, $B0B1B1B1, $B2B2B3B3, $B4B4B5B5, $B6B6B7B7, $B8B8B8B9
	dc.l	$B9BABABB, $4C4D4D4E, $4E4E4F4F, $50505051, $51525252, $53535454, $54555556, $56565757
	dc.l	$58585859, $595A5A5A, $5B5B5C5C, $5C5D5D5E, $5E5E5F5F, $60606061, $61626262, $63636464
	dc.l	$64656566, $66666767, $68686869, $696A6A6A, $6B6B6C6C, $6C6D6D6E, $6E6E6F6F, $70707071
	dc.l	$71727272, $73737474, $74757576, $76767777, $78787879, $797A7A7A, $7B7B7C7C, $7C7D7D7E
	dc.l	$7E7E7F7F, $80808081, $81828282, $83838484, $84858586, $86868787, $88888889, $898A8A8A
	dc.l	$8B8B8C8C, $8C8D8D8E, $8E8E8F8F, $90909091, $91929292, $93939494, $94959596, $96969797
	dc.l	$98989899, $999A9A9A, $9B9B9C9C, $9C9D9D9E, $9E9E9F9F, $A0A0A0A1, $A1A2A2A2, $A3A3A4A4
	dc.l	$A4A5A5A6, $A6A6A7A7, $A8A8A8A9, $A9AAAAAA, $ABABACAC, $ACADADAE, $AEAEAFAF, $B0B0B0B1
	dc.l	$B1B2B2B2, $55555656, $56575757, $58585859, $59595A5A, $5A5B5B5B, $5C5C5C5D, $5D5D5E5E
	dc.l	$5E5F5F5F, $60606061, $61616262, $62636363, $64646465, $65656666, $66676767, $68686869
	dc.l	$69696A6A, $6A6B6B6B, $6C6C6C6D, $6D6D6E6E, $6E6F6F6F, $70707071, $71717272, $72737373
	dc.l	$74747475, $75757676, $76777777, $78787879, $79797A7A, $7A7B7B7B, $7C7C7C7D, $7D7D7E7E
	dc.l	$7E7F7F7F, $80808081, $81818282, $82838383, $84848485, $85858686, $86878787, $88888889
	dc.l	$89898A8A, $8A8B8B8B, $8C8C8C8D, $8D8D8E8E, $8E8F8F8F, $90909091, $91919292, $92939393
	dc.l	$94949495, $95959696, $96979797, $98989899, $99999A9A, $9A9B9B9B, $9C9C9C9D, $9D9D9E9E
	dc.l	$9E9F9F9F, $A0A0A0A1, $A1A1A2A2, $A2A3A3A3, $A4A4A4A5, $A5A5A6A6, $A6A7A7A7, $A8A8A8A9
	dc.l	$A9A9AAAA, $5D5E5E5E, $5E5F5F5F, $60606060, $61616161, $62626262, $63636364, $64646465
	dc.l	$65656566, $66666667, $67676868, $68686969, $69696A6A, $6A6A6B6B, $6B6C6C6C, $6C6D6D6D
	dc.l	$6D6E6E6E, $6E6F6F6F, $70707070, $71717171, $72727272, $73737374, $74747475, $75757576
	dc.l	$76767677, $77777878, $78787979, $79797A7A, $7A7A7B7B, $7B7C7C7C, $7C7D7D7D, $7D7E7E7E
	dc.l	$7E7F7F7F, $80808080, $81818181, $82828282, $83838384, $84848485, $85858586, $86868687
	dc.l	$87878888, $88888989, $89898A8A, $8A8A8B8B, $8B8C8C8C, $8C8D8D8D, $8D8E8E8E, $8E8F8F8F
	dc.l	$90909090, $91919191, $92929292, $93939394, $94949495, $95959596, $96969697, $97979898
	dc.l	$98989999, $99999A9A, $9A9A9B9B, $9B9C9C9C, $9C9D9D9D, $9D9E9E9E, $9E9F9F9F, $A0A0A0A0
	dc.l	$A1A1A1A1, $66666667, $67676767, $68686868, $68696969, $69696A6A, $6A6A6A6B, $6B6B6B6B
	dc.l	$6C6C6C6C, $6C6D6D6D, $6D6D6E6E, $6E6E6E6F, $6F6F6F6F, $70707070, $70717171, $71717272
	dc.l	$72727273, $73737373, $74747474, $74757575, $75757676, $76767677, $77777777, $78787878
	dc.l	$78797979, $79797A7A, $7A7A7A7B, $7B7B7B7B, $7C7C7C7C, $7C7D7D7D, $7D7D7E7E, $7E7E7E7F
	dc.l	$7F7F7F7F, $80808080, $80818181, $81818282, $82828283, $83838383, $84848484, $84858585
	dc.l	$85858686, $86868687, $87878787, $88888888, $88898989, $89898A8A, $8A8A8A8B, $8B8B8B8B
	dc.l	$8C8C8C8C, $8C8D8D8D, $8D8D8E8E, $8E8E8E8F, $8F8F8F8F, $90909090, $90919191, $91919292
	dc.l	$92929293, $93939393, $94949494, $94959595, $95959696, $96969697, $97979797, $98989898
	dc.l	$98999999, $6E6F6F6F, $6F6F6F6F, $70707070, $70707070, $71717171, $71717172, $72727272
	dc.l	$72727273, $73737373, $73737474, $74747474, $74747575, $75757575, $75767676, $76767676
	dc.l	$76777777, $77777777, $78787878, $78787878, $79797979, $7979797A, $7A7A7A7A, $7A7A7A7B
	dc.l	$7B7B7B7B, $7B7B7C7C, $7C7C7C7C, $7C7C7D7D, $7D7D7D7D, $7D7E7E7E, $7E7E7E7E, $7E7F7F7F
	dc.l	$7F7F7F7F, $80808080, $80808080, $81818181, $81818182, $82828282, $82828283, $83838383
	dc.l	$83838484, $84848484, $84848585, $85858585, $85868686, $86868686, $86878787, $87878787
	dc.l	$88888888, $88888888, $89898989, $8989898A, $8A8A8A8A, $8A8A8A8B, $8B8B8B8B, $8B8B8C8C
	dc.l	$8C8C8C8C, $8C8C8D8D, $8D8D8D8D, $8D8E8E8E, $8E8E8E8E, $8E8F8F8F, $8F8F8F8F, $90909090
	dc.l	$90909090, $77777777, $77777777, $78787878, $78787878, $78787878, $78787879, $79797979
	dc.l	$79797979, $79797979, $79797A7A, $7A7A7A7A, $7A7A7A7A, $7A7A7A7A, $7A7B7B7B, $7B7B7B7B
	dc.l	$7B7B7B7B, $7B7B7B7B, $7C7C7C7C, $7C7C7C7C, $7C7C7C7C, $7C7C7C7D, $7D7D7D7D, $7D7D7D7D
	dc.l	$7D7D7D7D, $7D7D7E7E, $7E7E7E7E, $7E7E7E7E, $7E7E7E7E, $7E7F7F7F, $7F7F7F7F, $7F7F7F7F
	dc.l	$7F7F7F7F, $80808080, $80808080, $80808080, $80808081, $81818181, $81818181, $81818181
	dc.l	$81818282, $82828282, $82828282, $82828282, $82838383, $83838383, $83838383, $83838383
	dc.l	$84848484, $84848484, $84848484, $84848485, $85858585, $85858585, $85858585, $85858686
	dc.l	$86868686, $86868686, $86868686, $86878787, $87878787, $87878787, $87878787, $88888888
	dc.l	$88888888, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080
	dc.l	$80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080
	dc.l	$80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080
	dc.l	$80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080
	dc.l	$80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080
	dc.l	$80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080
	dc.l	$80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080
	dc.l	$80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080, $80808080
	dc.l	$80808080, $00000000, $00000000, $00000000, $00000000, $01010101, $01010101, $01010101
	dc.l	$01010101, $02020202, $02020202, $02020202, $02020202, $04040404, $04040404, $04040404
	dc.l	$04040404, $08080808, $08080808, $08080808, $08080808, $10101010, $10101010, $10101010
	dc.l	$10101010, $20202020, $20202020, $20202020, $20202020, $40404040, $40404040, $40404040
	dc.l	$40404040, $80808080, $80808080, $80808080, $80808080, $FFFFFFFF, $FFFFFFFF, $FFFFFFFF
	dc.l	$FFFFFFFF, $FEFEFEFE, $FEFEFEFE, $FEFEFEFE, $FEFEFEFE, $FCFCFCFC, $FCFCFCFC, $FCFCFCFC
	dc.l	$FCFCFCFC, $F8F8F8F8, $F8F8F8F8, $F8F8F8F8, $F8F8F8F8, $F0F0F0F0, $F0F0F0F0, $F0F0F0F0
	dc.l	$F0F0F0F0, $E0E0E0E0, $E0E0E0E0, $E0E0E0E0, $E0E0E0E0, $C0C0C0C0, $C0C0C0C0, $C0C0C0C0
	dc.l	$C0C0C0C0, $00010204, $08102040, $80FFFEFC, $F8F0E0C0, $00010204, $08102040, $80FFFEFC
	dc.l	$F8F0E0C0, $00010204, $08102040, $80FFFEFC, $F8F0E0C0, $00010204, $08102040, $80FFFEFC
	dc.l	$F8F0E0C0, $00010204, $08102040, $80FFFEFC, $F8F0E0C0, $00010204, $08102040, $80FFFEFC
	dc.l	$F8F0E0C0, $00010204, $08102040, $80FFFEFC, $F8F0E0C0, $00010204, $08102040, $80FFFEFC
	dc.l	$F8F0E0C0, $00010204, $08102040, $80FFFEFC, $F8F0E0C0, $00010204, $08102040, $80FFFEFC
	dc.l	$F8F0E0C0, $00010204, $08102040, $80FFFEFC, $F8F0E0C0, $00010204, $08102040, $80FFFEFC
	dc.l	$F8F0E0C0, $00010204, $08102040, $80FFFEFC, $F8F0E0C0, $00010204, $08102040, $80FFFEFC
	dc.l	$F8F0E0C0, $00010204, $08102040, $80FFFEFC, $F8F0E0C0, $00010204, $08102040, $80FFFEFC
	dc.l	$F8F0E0C0, $00000000, $000000D1, $C9D511A0, $00B7ED52, $112000ED, $52280FD2, $13167DED
	dc.l	$440F0FE6, $07210016, $6FE9D1D5, $132918D4, $F33E2032, $DD1F2140, $17223900, $ED73DE1F
	dc.l	$DDF933F1, $C1E1D131, $DD1FF508, $CBFCE5CB, $BA1B7AA3, $3C200305, $167F141C, $D5151D78
	dc.l	$B9200BDA, $6919CBBC, $EBED52C3, $7216AF95, $5F9C8557, $EB2B242C, $E5C521C4, $1F083001
	dc.l	$2CE5ED7B, $DE1F3AD3, $1FCFF301, $00032614, $ED5BD91F, $DD2AD51F, $D908AF08, $ED4BD11F
	dc.l	$0AE60FC6, $04473ADC, $1FFD6F21, $00031101, $40D9FB0D, $3E800200, $1A136F0A, $0C8624F3
	dc.l	$020C8625, $02DD2D28, $1DD94E0A, $1208FD85, $30012C08, $7DD9FB91, $90D2B416, $F5F1F5F1
	dc.l	$E509E1F3, $18E3DD25, $C2C516FB, $3A090021, $D41FBE20, $28F379D9, $BD28174E, $0A1208FD
	dc.l	$8530012C, $08D9FBF5, $F1F5F1E5, $232323E1, $18E3D9FB, $3ADB1FE6, $02C28216, $C93C1100
	dc.l	$80DD2100, $80BE2004, $DD2AD71F, $2614D7C3, $B41621D6, $1636B323, $3616C9D9, $00030B03
	dc.l	$0B001814, $F5C50672, $79D9BD28, $EE4E0A12, $08FD8530, $012C08D9, $3EFF32E2, $1FC5C1E5
	dc.l	$2929E100, $10E279D9, $BD280A4E, $0A1208FD, $8530012C, $08D9D9ED, $4BD11F0A, $E60FC604
	dc.l	$47D93ADC, $1FFD6F3A, $C21FB728, $0DF2AE17, $3ADB1F0F, $3028AF32, $C21F79D9, $BD280A4E
	dc.l	$0A1208FD, $8530012C, $08D9AF32, $E21FC1F1, $FBC93DCA, $69193D20, $0BFD2E00, $18DC3AC2
	dc.l	$1FC3F118, $3E8032E8, $1F18CBF3, $3E8032DD, $1F21DC17, $223900D9, $0E00D9FB, $000018FC
	dc.l	$D921834D, $CD091621, $F517790C, $D1E60387, $16005F19, $5E2356EB, $E9FB170B, $181B18D9
	dc.l	$010000ED, $43E41F11, $0080214B, $18FBE9D9, $ED43E41F, $01000011, $0000214B, $18FBE9D9
	dc.l	$ED43E61F, $6069ED5B, $E41FAFED, $52FA3C18, $7BCB2A1F, $CB2A1FCB, $2A1F5FAF, $ED52300E
	dc.l	$CD3101CD, $9102CD2E, $173E0132, $E31FC91A, $031A031A, $031A031A, $031A031A, $031A03E9
	dc.l	$F33E0232, $DD1FE52A, $390022E0, $1F217518, $223900E1, $FB000018, $FCE52172, $4DCD0916
	dc.l	$E13AC21F, $B72823F2, $98183ADB, $1F0F3006, $AF32C21F, $FBC93AC2, $1FC3F118, $3DCA6919
	dc.l	$3D28F13E, $8032E81F, $18E6E52A, $E01F2239, $00E13333, $C9F33E01, $32DD1F21, $C2182239
	dc.l	$00FB0000, $18FC2187, $4DCD0916, $3AC21FB7, $FAF118FB, $C931EA1F, $21000006, $15E510FD
	dc.l	$31C01FCD, $C71721C6, $1F3EC077, $2C773E52, $32C31F18, $C031C01F, $21C21F36, $00CDFF18
	dc.l	$C3B118D6, $8028134F, $06008760, $6F292909, $DD216D19, $EBDD19C3, $1A19DD21, $C81F21C6
	dc.l	$1FDDCB01, $4628012C, $4E21C31F, $11004043, $3E5270EB, $362B2C36, $802C36B6, $2C716836
	dc.l	$2A12CD52, $1921C31F, $1100403E, $5273EB36, $2B2C3600, $12C9DD7E, $00FE50CA, $4300FE54
	dc.l	$CAD201FE, $44CA2C16, $3E0132E8, $1FAF32C2, $1F31C01F, $CD4119C3
	dc.w	$B118

; ------------------------------------------------------------------------------
; Exported symbols
; ------------------------------------------------------------------------------

MegaPCM_LoadDriver:	equ	MegaPCMLibraryBlob+$0
MegaPCM_LoadSampleTable:	equ	MegaPCMLibraryBlob+$62
MegaPCM_PlaySample:	equ	MegaPCMLibraryBlob+$20E
MegaPCM_PausePlayback:	equ	MegaPCMLibraryBlob+$230
MegaPCM_UnpausePlayback:	equ	MegaPCMLibraryBlob+$254
MegaPCM_StopPlayback:	equ	MegaPCMLibraryBlob+$278
MegaPCM_SetVolume:	equ	MegaPCMLibraryBlob+$29C
MegaPCM_SetSFXVolume:	equ	MegaPCMLibraryBlob+$2BE
MegaPCM_SetPan:	equ	MegaPCMLibraryBlob+$2E0
MegaPCM_SetSFXPan:	equ	MegaPCMLibraryBlob+$302
MegaPCM:	equ	MegaPCMLibraryBlob+$324
MegaPCM_End:	equ	MegaPCMLibraryBlob+$1C9A


	include "Sound/MegaPCM - DAC Table.asm"
	include "Sound/DAC Samples.asm"
